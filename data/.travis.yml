sudo: required
language: bash
services:
- docker
before_install:
- git clone --recursive -j8 git://github.com/tprasadtp/ubuntu-post-install.git ubuntu-post-install
  && cd ubuntu-post-install
- chmod +x ./after-effects
- chmod +x ./tests/*
jobs:
  include:
  - stage: test-scripts-in-container
    env: TEST_ENV="Artful-Docker"
    script: "./tests/test-artful"
  - env: TEST_ENV="Xenial-Docker"
    script: "./tests/test-xenial"
  - env: TEST_ENV="Bionic-Docker"
    script: "./tests/test-bionic"
matrix:
  fast_finish: true
  allow_failures:
  - env: TEST_ENV="Bionic-Docker"
notifications:
  email: false
  slack:
    secure: juC6j3lWQwa2AMh1gAqihLuoC18xNLtM6Du+x8qkHfayD84gBYmyt+0PG4YgO2PKxd+byhj4qvGVYZYSJESdcFjAUIRjYD36ekwAvUARWK7zE39YFHYmUX98xJxXJNW6SLq6BIVKo6a9aRuTMBRrXYJ5enHjRoIhfryZwI/6npNyS3cp6O3bB3ItWLQMR3Q03gKsE7kJpY0PAaFeFTjLdRswnYkJaSNZm0hwlsa/c8aCCbMiDnijTEbdSyE1W4wmkBvaTJzF5tdYxqMHW0PxjHNGH5I4N8lU/cvyljiTdpfuyT9/r9DjWyLZO4ehP2rEwSQ3QpHJq/13CMtA/3Bimsee8tOGMIzlXEG64yOk1EdpGHo9pQTKSQ7Iu8M6p2kuiWSKw0qXpPmyq1iXGlNeOjdVGOzJ7Z86wEhm00DuwNBof9axfM3hIaN+oMLOqPSq3kT5Vfk8y3ZbKzM87xNLZLDc59MhoVRmd41VxMS284Q3trMACv/UCOpjS2xWbKxfQ4bwUbU0+1GnHZFcBmnnDV50c3VBsqlJINJJk7h3Zqwt74GCwAGWD2boOXguyVhkLMX++AJrbqtRgbHOIM7885RPyKYXCWRcJ1RABQEDQ6THHenFgAV9iYc9xKQ2DyROx8F/I3iWI4qj7iaSIoiRwAKr3xOEz1omXfa486acaJo=
    on_success: always # default: always
    on_failure: always # default: always
    on_start: always
    template:
      - "Build: <%{build_url}|#%{build_number}> has %{result}, Duration: %{duration}"
      - "Repository: %{repository} Branch : %{branch}"
      - "Commit: <%{compare_url}|%{commit}> - %{commit_message}"
